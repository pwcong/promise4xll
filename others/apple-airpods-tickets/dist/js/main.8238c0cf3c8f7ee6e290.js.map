{"version":3,"sources":["webpack:///./src/pages/ticket.tsx","webpack:///./src/pages/app.tsx","webpack:///./src/index.tsx","webpack:///./src/assets/imgs/airpods.jpeg"],"names":["props","img","gift","description","call","onDone","isCompleted","clss","className","join","src","onClick","confirm","a","document","createElement","href","click","tickets","setTickets","getTickets","get","then","res","data","useEffect","map","t","key","id","undefined","render","getElementById","module","exports"],"mappings":"mLAgEe,G,UA3CiC,SAAAA,GACtC,IAAAC,EAAA,EAAAA,IAAKC,EAAA,EAAAA,KAAMC,EAAA,EAAAA,YAAaC,EAAA,EAAAA,KAAMC,EAAA,EAAAA,OAAQC,EAAA,EAAAA,YAGxCC,EAAO,CADD,UAGZ,OACE,yBAAKC,UAAWD,EAAKE,KAAK,MACxB,yBAAKD,UAAU,cACZP,GACC,yBAAKO,UAAU,mBACb,yBAAKE,IAAKT,KAGd,yBAAKO,UAAU,oBAAoBN,IAErC,yBAAKM,UAAU,iBACb,yBAAKA,UAAU,uBACf,yBAAKA,UAAU,wBACf,yBAAKA,UAAU,qBAAqBL,GACpC,yBAAKK,UAAU,wBACb,yBACEA,UAAW,kBAAiBF,EAAc,yBAA2B,IACrEK,QAAS,WACP,IAAIL,GAGAM,QAAQ,WAAY,CACtB,IAAMC,EAAIC,SAASC,cAAc,KACjCF,EAAEG,KAAO,OAAOZ,EAChBS,EAAEI,QACFZ,GAAUA,OAIZC,EAAc,MAAQ,a,qBCPrB,G,UAvCsB,SAAAN,GAC7B,uBAACkB,EAAA,KAASC,EAAA,KAEVC,EAAa,WACjB,EAAAP,EACGQ,IACC,qMAEDC,KAAK,SAAAC,GAAO,OAAAA,EAAIC,OAChBF,KAAK,SAAAC,GACJJ,EAAWI,GAAO,OAQxB,OAJA,IAAME,UAAU,WACdL,KACC,IAGD,yBAAKZ,UAAU,aACZU,EAAQQ,IAAI,SAAAC,GAAK,OAChB,kBAAC,EAAM,aACLC,IAAKD,EAAEE,IACHF,EAAC,CACL1B,IAAc,MAAT0B,EAAEE,GAAa,EAAAhB,OAAUiB,EAC9BzB,OAAQ,8D,2DAEJ,O,sBAAA,GAAM,EAAAQ,EAAMQ,IACV,wMAAwMM,EAAEE,K,OAE5M,OAHA,SAGA,GAAMT,K,cAAN,S,kECnCd,IAASW,OACP,kBAAC,EAAG,MACJjB,SAASkB,eAAe,S,uBCP1BC,EAAOC,QAAU,IAA0B,sD","file":"js/main.8238c0cf3c8f7ee6e290.js","sourcesContent":["import React from 'react';\n\nimport './style/ticket.scss';\n\nexport interface ITicket {\n  id: string\n  gift: string\n  description: string\n  call: string\n  isCompleted: boolean\n}\n\nexport interface IProps {\n  img?: string;\n  gift: string\n  description: string\n  call: string\n  isCompleted?: boolean\n  onDone?: () => void\n}\n\nconst Ticket: React.FunctionComponent<IProps> = props => {\n  const { img, gift, description, call, onDone, isCompleted } = props;\n\n  const cls = 'ticket';\n  const clss = [cls];\n\n  return (\n    <div className={clss.join(' ')}>\n      <div className=\"ticket-top\">\n        {img && (\n          <div className=\"ticket-top-left\">\n            <img src={img} />\n          </div>\n        )}\n        <div className=\"ticket-top-right\">{gift}</div>\n      </div>\n      <div className=\"ticket-bottom\">\n        <div className=\"ticket-bottom-left\"></div>\n        <div className=\"ticket-bottom-right\"></div>\n        <div className=\"ticket-bottom-top\">{description}</div>\n        <div className=\"ticket-bottom-bottom\">\n          <div \n            className={`ticket-button ${isCompleted ? 'ticket-button-disabled' : ''}`}\n            onClick={() => {\n              if (isCompleted) {\n                return\n              }\n              if (confirm('是否确认使用？')) {\n                const a = document.createElement('a')\n                a.href = `tel:${call}`\n                a.click()\n                onDone && onDone()\n              }\n            }}\n          >\n            { isCompleted ? '已使用' : '立即使用'}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Ticket;\n","import React from 'react';\n\nimport axios from 'axios';\n\nimport Ticket, { ITicket } from './ticket';\n\nimport airpods from '@/assets/imgs/airpods.jpeg';\n\nimport './style/app.scss';\n\nconst App: React.FunctionComponent = props => {\n  const [tickets, setTickets] = React.useState<Array<ITicket>>([]);\n\n  const getTickets = () => {\n    axios\n      .get(\n        'https://1048991038380814.cn-shenzhen.fc.aliyuncs.com/2016-08-15/proxy/apple_airpods_tickets-TodoListService-72C3B98572CF/apple_airpods_tickets-TodoListFunction-F2301335CE66/api%2Ftickets%2Flist'\n      )\n      .then(res => res.data)\n      .then(res => {\n        setTickets(res || []);\n      });\n  };\n\n  React.useEffect(() => {\n    getTickets();\n  }, []);\n\n  return (\n    <div className=\"container\">\n      {tickets.map(t => (\n        <Ticket\n          key={t.id}\n          {...t}\n          img={t.id === '1' ? airpods : undefined}\n          onDone={async () => {\n            try {\n              await axios.get(\n                `https://1048991038380814.cn-shenzhen.fc.aliyuncs.com/2016-08-15/proxy/apple_airpods_tickets-TodoListService-72C3B98572CF/apple_airpods_tickets-TodoListFunction-F2301335CE66/api%2Ftickets%2Fdone?id=${t.id}`\n              );\n              await getTickets();\n            } catch (e) {}\n          }}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './pages/app';\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('app')\n);","module.exports = __webpack_public_path__ + \"imgs/airpods.jpeg?a4714121f20f40ad36b99fa8e6f13d2c\";"],"sourceRoot":""}